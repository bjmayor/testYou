<?phpdefined('BASEPATH') OR exit('No direct script access allowed');/** *  **/class Answer extends Admin_Controller{        function __construct()    {        parent::__construct();        $this->load->model('answer_model');    }    public function create()    {        $ret = true;        $exists = array();        $postAnswers = $this->input->post('answers');                $answers = $this->answer_model->get_answer(array("sub_question_id"=>$postAnswers[0]['sub_question_id']));        if ($answers)        {            foreach($answers as $answer)            {                $exists[] = $answer['label'];            }        }        foreach($this->input->post('answers') as $answer)        {            if((isset($answer['id']) && $answer['id']>0) || in_array($answer['label'], $exists))            {                $this->answer_model->update_answer($answer);            }            else            {                $ret = $ret && $this->answer_model->insert_answer($answer);            }        }        if($ret)        {            Response::build(0,'ok')->show();        }        else        {            Response::build(-1,"create answer fail")->show();        }    }    public function del()    {        $ret = $this->answer_model->delete_answer(array('id'=>$this->input->post('id')));        if($ret)        {            Response::build(0,'ok')->show();        }        else        {            Response::build(-1,"delete error")->show();        }    }}?>